<HTML>
<HEAD>
<TITLE>Modelica.Utilities.Examples</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Examples to demonstrate the usage of package Modelica.Utilities&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Examples<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Utilities.Examples"></A><A HREF="Modelica_Utilities.html#Modelica.Utilities"
>Modelica.Utilities</A>.Examples</H2>
<B>Examples to demonstrate the usage of package Modelica.Utilities</B>
<P>
<H3>Information</H3>
<PRE></pre>
<p>
This package contains quite involved examples that demonstrate how to
use the functions of package Modelica.Utilities. In particular
the following examples are present.
</p>
<ul>
<li> Function <A HREF="Modelica_Utilities_Examples.html#Modelica.Utilities.Examples.calculator"
>calculator</a>
     is an interpreter to evaluate 
     expressions consisting of +,-,*,/,(),sin(), cos(), tan(), sqrt(), pi.
     For example: calculator("1.5*sin(pi/6)"); <br>&nbsp;</li>
<li> Function <A HREF="Modelica_Utilities_Examples.html#Modelica.Utilities.Examples.expression"
>expression</a>
     is the basic function used in "calculator" to evaluate an expression.
     It is useful if the expression interpreter is used in a larger
     scan operation (such as readRealParameter below).<br>&nbsp;</li>
<li> Function <A HREF="Modelica_Utilities_Examples.html#Modelica.Utilities.Examples.readRealParameter"
>readRealParameter</a>
     reads the value of a parameter
     from file, given the file and the parameter name. The value
     on file is interpreted with the Examples.expression function
     and can therefore be an expression.<br>&nbsp;</li>
<li> Model <A HREF="Modelica_Utilities_Examples.html#Modelica.Utilities.Examples.readRealParameterModel"
>readRealParameterModel</a>
     is a test model to demonstrate the usage of "readRealParameter". The model
     contains 3 parameters that are read from file "Modelica.Utilities/data/Examples_readRealParameters.txt".
     </li>
</ul>
<pre></PRE><P>

<H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Utilities.Examples.calculatorS.png" ALT="Modelica.Utilities.Examples.calculator" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Utilities_Examples.html#Modelica.Utilities.Examples.calculator"
>calculator</A>
</TD><TD>Interpreter to evaluate simple expressions consisting of +,-,*,/,(),sin(), cos(), tan(), sqrt(), pi</TD></TR>
<TR><TD><IMG SRC="Modelica.Utilities.Examples.calculatorS.png" ALT="Modelica.Utilities.Examples.expression" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Utilities_Examples.html#Modelica.Utilities.Examples.expression"
>expression</A>
</TD><TD>Expression interpreter that returns with the position after the expression (expression may consist of +,-,*,/,(),sin(), cos(), tan(), sqrt(), pi</TD></TR>
<TR><TD><IMG SRC="Modelica.Utilities.Examples.calculatorS.png" ALT="Modelica.Utilities.Examples.readRealParameter" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Utilities_Examples.html#Modelica.Utilities.Examples.readRealParameter"
>readRealParameter</A>
</TD><TD>Read the value of a Real parameter from file</TD></TR>
<TR><TD><IMG SRC="Modelica.Utilities.Examples.readRealParameterModelS.png" ALT="Modelica.Utilities.Examples.readRealParameterModel" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Utilities_Examples.html#Modelica.Utilities.Examples.readRealParameterModel"
>readRealParameterModel</A>
</TD><TD>Demonstrate usage of Examples.readRealParameter/.expression</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE calculator<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Utilities.Examples.calculatorI.png" ALT="Modelica.Utilities.Examples.calculator" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Utilities.Examples.calculator"></A><A HREF="Modelica_Utilities_Examples.html#Modelica.Utilities.Examples"
>Modelica.Utilities.Examples</A>.calculator</H2>
<B>Interpreter to evaluate simple expressions consisting of +,-,*,/,(),sin(), cos(), tan(), sqrt(), pi</B><p>
<H3>Information</H3>
<PRE></pre>
<h4>Syntax</h4>
<blockquote><pre>
result = <b>calculator</b>(expression);
</pre></blockquote>
<h4>Description</h4>
<p>
This function demonstrates how a simple expression calculator
can be implemented in form of a recursive decent parser
using basically the Strings.scanToken(..) and Strings.scanDelimiter(..)
function. 
</p>
<p>
The following operations are supported (pi=3.14.. is a predefined constant):
</p>
<pre>
   +, -
   *, /
   (expression)
   sin(expression)
   cos(expression)
   tan(expression)
   sqrt(expression)
   pi
</pre>
<h4>Example</h4>
<blockquote><pre>
  calculator("2+3*(4-1)");  // returns 11
  calculator("sin(pi/6)");  // returns 0.5
</pre></blockquote>
<pre></PRE>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>string</TD><TD>Expression that is evaluated</TD></TR>
</TABLE>
<H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>result</TD><TD>Value of expression</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE expression<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Utilities.Examples.calculatorI.png" ALT="Modelica.Utilities.Examples.expression" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Utilities.Examples.expression"></A><A HREF="Modelica_Utilities_Examples.html#Modelica.Utilities.Examples"
>Modelica.Utilities.Examples</A>.expression</H2>
<B>Expression interpreter that returns with the position after the expression (expression may consist of +,-,*,/,(),sin(), cos(), tan(), sqrt(), pi</B><p>
<H3>Information</H3>
<PRE></pre>
<h4>Syntax</h4>
<blockquote><pre>
             result = <b>expression</b>(string);
(result, nextIndex) = <b>expression</b>(string, startIndex=1, message="");
</pre></blockquote>
<h4>Description</h4>
<p>
This function is nearly the same as Examples.<b>calculator</b>.
The essential difference is that function "expression" might be
used in other parsing operations: After the expression is 
parsed and evaluated, the function returns with the value
of the expression as well as the position of the character
directly after the expression.
</p>
<p>
This function demonstrates how a simple expression calculator
can be implemented in form of a recursive decent parser
using basically the Strings.scanToken(..) and scanDelimiters(..)
function. There are 2 local functions (term, primary) that
implement the corresponding part of the grammar.
</p>
<p>
The following operations are supported (pi=3.14.. is a predefined constant):
</p>
<pre>
   +, -
   *, /
   (expression)
   sin(expression)
   cos(expression)
   tan(expression)
   sqrt(expression)
   pi
</pre>
<p>
The optional argument "startIndex" defines at which position
scanning of the expression starts.
</p>
<p>
In case of error,
the optional argument "message" is appended to the error
message, in order to give additional information where
the error occured.
</p>
<p>
This function parses the following grammaer
</p>
<pre>
  expression: [ add_op ] term { add_op term }
  add_op    : "+" | "-"
  term      : primary { mul_op primary }
  mul_op    : "*" | "/"
  primary   : UNSIGNED_NUMBER
              | pi
              | ( expression )
              | functionName( expression )
  function  :   sin
              | cos
              | tan
              | sqrt
</pre>
<p>
Note, in Examples.readRealParameter it is shown, how the expression
function can be used as part of another scan operation.
</p>
<h4>Example</h4>
<blockquote><pre>
  expression("2+3*(4-1)");  // returns 11
  expression("sin(pi/6)");  // returns 0.5
</pre></blockquote>
<pre></PRE>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>string</TD><TD>Expression that is evaluated</TD></TR>
<TR><TD>startIndex</TD><TD>Start scanning of expression at character startIndex</TD></TR>
<TR><TD>message</TD><TD>Message used in error message if scan is not successful</TD></TR>
</TABLE>
<H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>result</TD><TD>Value of expression</TD></TR>
<TR><TD>nextIndex</TD><TD>Index after the scanned expression</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE readRealParameter<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Utilities.Examples.calculatorI.png" ALT="Modelica.Utilities.Examples.readRealParameter" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Utilities.Examples.readRealParameter"></A><A HREF="Modelica_Utilities_Examples.html#Modelica.Utilities.Examples"
>Modelica.Utilities.Examples</A>.readRealParameter</H2>
<B>Read the value of a Real parameter from file</B><p>
<H3>Information</H3>
<PRE></pre>
<h4>Syntax</h4>
<blockquote><pre>
result = <b>readRealParameter</b>(fileName, name);
</pre></blockquote>
<h4>Description</h4>
<p>
This function demonstrates how a function can be implemented
that reads the value of a parameter from file. The function
performs the following actions:
</p>
<ol>
<li> It opens file "fileName" and reads the lines of the file.</li>
<li> In every line, Modelica line comments ("// ... end-of-line") 
     are skipped </li>
<li> If a line consists of "name = expression" and the "name"
     in this line is identical to the second argument "name"
     of the function call, the expression calculator Examples.expression
     is used to evaluate the expression after the "=" character.
     The expression can optionally be terminated with a ";".</li>
<li> The result of the expression evaluation is returned as
     the value of the parameter "name". </li>
</ol>
<h4>Example</h4>
<p>
On file "test.txt" the following lines might be present:
</p>
<blockquote><pre>
// Motor data
J        = 2.3     // inertia
w_rel0   = 1.5*2;  // relative angular velocity
phi_rel0 = pi/3    
</pre></blockquote>
<p>
The function returns the value "3.0" when called as:
</p>
<blockquote><pre>
readRealParameter("test.txt", "w_rel0")
</pre></blockquote>
<pre></PRE>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>fileName</TD><TD>Name of file</TD></TR>
<TR><TD>name</TD><TD>Name of parameter</TD></TR>
</TABLE>
<H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>result</TD><TD>Actual value of parameter on file</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE readRealParameterModel<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Utilities.Examples.readRealParameterModelI.png" ALT="Modelica.Utilities.Examples.readRealParameterModel" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Utilities.Examples.readRealParameterModel"></A><A HREF="Modelica_Utilities_Examples.html#Modelica.Utilities.Examples"
>Modelica.Utilities.Examples</A>.readRealParameterModel</H2>
<B>Demonstrate usage of Examples.readRealParameter/.expression</B><p>
<H3>Information</H3>
<PRE></pre>
<p>
Model that shows the usage of Examples.readRealParameter and Examples.expression.
The model has 3 parameters and the values of these parameters are read
from a file.
</p>
<pre></PRE>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for an example model).
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>file</TD><TD>File on which data is present</TD></TR>
<TR><TD>J</TD><TD>Inertia [kg.m2]</TD></TR>
<TR><TD>phi_rel0</TD><TD>Relative angle [rad]</TD></TR>
<TR><TD>w_rel0</TD><TD>Relative angular velocity [rad/s]</TD></TR>
</TABLE>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Thu Jan 29 17:33:23 2009.
</address></BODY>
</HTML>
