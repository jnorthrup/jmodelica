<HTML>
<HEAD>
<TITLE>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Library of components of the robot&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Components<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3</A>.Components</H2>
<B>Library of components of the robot</B>
<P>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
This library contains the different components
of the r3 robot. Usually, there is no need to
use this library directly.
</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons_Library.html#Modelica.Icons.Library"
>Modelica.Icons.Library</A> (Icon for library).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBusS.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus"
>AxisControlBus</A>
</TD><TD>Data bus for one robot axis</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBusS.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBus" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBus"
>ControlBus</A>
</TD><TD>Data bus for all axes of robot</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1S.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1"
>PathPlanning1</A>
</TD><TD>Generate reference angles for fastest kinematic movement</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1S.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning6" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning6"
>PathPlanning6</A>
</TD><TD>Generate reference angles for fastest kinematic movement</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBusS.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus"
>PathToAxisControlBus</A>
</TD><TD>Map path planning to one axis control bus</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType1S.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType1" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType1"
>GearType1</A>
</TD><TD>Motor inertia and gearbox model for r3 joints 1,2,3 </TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2S.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2"
>GearType2</A>
</TD><TD>Motor inertia and gearbox model for r3 joints 4,5,6  </TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MotorS.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Motor" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Motor"
>Motor</A>
</TD><TD>Motor model including current controller of r3 motors </TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControllerS.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Controller" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Controller"
>Controller</A>
</TD><TD>P-PI cascade controller for one axis</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1S.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1"
>AxisType1</A>
</TD><TD>Axis model of the r3 joints 1,2,3 </TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1S.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType2" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType2"
>AxisType2</A>
</TD><TD>Axis model of the r3 joints 4,5,6 </TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MechanicalStructureS.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MechanicalStructure" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MechanicalStructure"
>MechanicalStructure</A>
</TD><TD>Model of the mechanical part of the r3 robot (without animation)</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.InternalConnectorsS.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.InternalConnectors" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components_InternalConnectors.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.InternalConnectors"
>InternalConnectors</A>
</TD><TD>Internal models that should not be used</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE AxisControlBus<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBusI.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</A>.AxisControlBus</H2>
<B>Data bus for one robot axis</B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBusD.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Signal bus that is used to communicate all signals for <b>one</b> axis.
This is an expandable connector which is "empty".
The actual signal content is defined by connecting to an instance
of this connector. The signals that are usually used
(and are by default listed as choices in the menu that defines
the connection to this bus) are defined
<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components_InternalConnectors.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.InternalConnectors.AxisControlBus"
>here</a>.
</p>

<pre></PRE><P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.SignalSubBus"
>Modelica.Icons.SignalSubBus</A> (Icon for signal sub-bus).
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">expandable connector</font> AxisControlBus <font color="darkgreen">&quot;Data bus for one robot axis&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.SignalSubBus"
>Modelica.Icons.SignalSubBus</A>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>AxisControlBus;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ControlBus<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBusI.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBus" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBus"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</A>.ControlBus</H2>
<B>Data bus for all axes of robot</B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBusD.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBus">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Signal bus that is used to communicate <b>all signals</b> of the robot.
This is an expandable connector which is "empty".
The actual signal content is defined by connecting to an instance
of this connector. The sub-buses that are usually used
(and are by default listed as choices in the menu that defines
the connection to this bus) are defined
<A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components_InternalConnectors.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.InternalConnectors.ControlBus"
>here</a>.
</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.SignalBus"
>Modelica.Icons.SignalBus</A> (Icon for signal bus).
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">expandable connector</font> ControlBus <font color="darkgreen">&quot;Data bus for all axes of robot&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.SignalBus"
>Modelica.Icons.SignalBus</A>;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ControlBus;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PathPlanning1<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1I.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</A>.PathPlanning1</H2>
<B>Generate reference angles for fastest kinematic movement</B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1D.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning1">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Given
</p>
<ul>
<li> start and end angle of an axis</li>
<li> maximum speed of the axis </li>
<li> maximum acceleration of the axis </li>
</ul>

<p>
this component computes the fastest movement under the
given constraints. This means, that:
</p>

<ol>
<li> The axis accelerates with the maximum acceleration
     until the maximum speed is reached.</li>
<li> Drives with the maximum speed as long as possible.</li>
<li> Decelerates with the negative of the maximum acceleration
     until rest.</li>
</ol>

<p>
The acceleration, constant velocity and deceleration
phase are determined in such a way that the movement
starts form the start angles and ends at the end angles.
The output of this block are the computed angles, angular velocities
and angular acceleration and this information is stored as reference
motion on the controlBus of the r3 robot.
</p>

<pre>
</PRE><P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>angleBegDeg</TD><TD>0</TD><TD>Start angle [deg]</TD></TR>
<TR><TD>Real</TD><TD>angleEndDeg</TD><TD>1</TD><TD>End angle [deg]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>AngularVelocity</A></TD><TD>speedMax</TD><TD>3</TD><TD>Maximum axis speed [rad/s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularAcceleration"
>AngularAcceleration</A></TD><TD>accMax</TD><TD>2.5</TD><TD>Maximum axis acceleration [rad/s2]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>startTime</TD><TD>0</TD><TD>Start time of movement [s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>swingTime</TD><TD>0.5</TD><TD>Additional time after reference motion is in rest before simulation is stopped [s]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBus"
>ControlBus</A></TD><TD>controlBus</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> PathPlanning1 <font color="darkgreen">
  &quot;Generate reference angles for fastest kinematic movement&quot;</font>

  <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
  <font color="blue">import </font>Cv = <A HREF="Modelica_SIunits_Conversions.html#Modelica.SIunits.Conversions"
>Modelica.SIunits.Conversions</A>;
  <font color="blue">parameter </font>Real angleBegDeg(unit=&quot;deg&quot;) = 0 <font color="darkgreen">&quot;Start angle&quot;</font>;
  <font color="blue">parameter </font>Real angleEndDeg(unit=&quot;deg&quot;) = 1 <font color="darkgreen">&quot;End angle&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>SI.AngularVelocity</A> speedMax = 3 <font color="darkgreen">&quot;Maximum axis speed&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularAcceleration"
>SI.AngularAcceleration</A> accMax = 2.5 <font color="darkgreen">&quot;Maximum axis acceleration&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>SI.Time</A> startTime=0 <font color="darkgreen">&quot;Start time of movement&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>SI.Time</A> swingTime=0.5 <font color="darkgreen">
    &quot;Additional time after reference motion is in rest before simulation is stopped&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Angle"
>SI.Angle</A> angleBeg=<font color="red">Cv.from_deg</font>(angleBegDeg) <font color="darkgreen">&quot;Start angles&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Angle"
>SI.Angle</A> angleEnd=<font color="red">Cv.from_deg</font>(angleEndDeg) <font color="darkgreen">&quot;End angles&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBus"
>ControlBus</A> controlBus;
  <A HREF="Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.KinematicPTP2"
>Modelica.Blocks.Sources.KinematicPTP2</A> path(
    q_end={angleEnd},
    qd_max={speedMax},
    qdd_max={accMax},
    startTime=startTime,
    q_begin={angleBeg});
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus"
>PathToAxisControlBus</A> pathToAxis1(<font color="blue">final </font>nAxis=1, <font color="blue">final </font>axisUsed=1);</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Blocks_Logical.html#Modelica.Blocks.Logical.TerminateSimulation"
>Blocks.Logical.TerminateSimulation</A> terminateSimulation(condition=time &gt;= path.endTime
         + swingTime);</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(path.q, pathToAxis1.q);
  <font color="red">connect</font>(path.qd, pathToAxis1.qd);
  <font color="red">connect</font>(path.qdd, pathToAxis1.qdd);
  <font color="red">connect</font>(path.moving, pathToAxis1.moving);
  <font color="red">connect</font>(pathToAxis1.axisControlBus, controlBus.axisControlBus1);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PathPlanning1;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PathPlanning6<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning6I.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning6" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning6"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</A>.PathPlanning6</H2>
<B>Generate reference angles for fastest kinematic movement</B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning6D.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathPlanning6">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Given
</p>
<ul>
<li> start and end angles of every axis</li>
<li> maximum speed of every axis </li>
<li> maximum acceleration of every axis </li>
</ul>

<p>
this component computes the fastest movement under the
given constraints. This means, that:
</p>

<ol>
<li> Every axis accelerates with the maximum acceleration
     until the maximum speed is reached.</li>
<li> Drives with the maximum speed as long as possible.</li>
<li> Decelerates with the negative of the maximum acceleration
     until rest.</li>
</ol>

<p>
The acceleration, constant velocity and deceleration
phase are determined in such a way that the movement
starts form the start angles and ends at the end angles.
The output of this block are the computed angles, angular velocities
and angular acceleration and this information is stored as reference
motion on the controlBus of the r3 robot.
</p>

<pre></PRE><P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>naxis</TD><TD>6</TD><TD>number of driven axis</TD></TR>
<TR><TD>Real</TD><TD>angleBegDeg[naxis]</TD><TD>zeros(naxis)</TD><TD>Start angles [deg]</TD></TR>
<TR><TD>Real</TD><TD>angleEndDeg[naxis]</TD><TD>ones(naxis)</TD><TD>End angles [deg]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>AngularVelocity</A></TD><TD>speedMax[naxis]</TD><TD>fill(3, naxis)</TD><TD>Maximum axis speed [rad/s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularAcceleration"
>AngularAcceleration</A></TD><TD>accMax[naxis]</TD><TD>fill(2.5, naxis)</TD><TD>Maximum axis acceleration [rad/s2]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>startTime</TD><TD>0</TD><TD>Start time of movement [s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>swingTime</TD><TD>0.5</TD><TD>Additional time after reference motion is in rest before simulation is stopped [s]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBus"
>ControlBus</A></TD><TD>controlBus</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> PathPlanning6 <font color="darkgreen">
  &quot;Generate reference angles for fastest kinematic movement&quot;</font>

  <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
  <font color="blue">import </font>Cv = <A HREF="Modelica_SIunits_Conversions.html#Modelica.SIunits.Conversions"
>Modelica.SIunits.Conversions</A>;
  <font color="blue">parameter </font>Integer naxis=6 <font color="darkgreen">&quot;number of driven axis&quot;</font>;
  <font color="blue">parameter </font>Real angleBegDeg[naxis](unit=&quot;deg&quot;) =<font color="red"> zeros</font>(naxis) <font color="darkgreen">&quot;Start angles&quot;</font>;
  <font color="blue">parameter </font>Real angleEndDeg[naxis](unit=&quot;deg&quot;) =<font color="red"> ones</font>(naxis) <font color="darkgreen">&quot;End angles&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>SI.AngularVelocity</A> speedMax[naxis]=<font color="red">fill</font>(3, naxis) <font color="darkgreen">
    &quot;Maximum axis speed&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularAcceleration"
>SI.AngularAcceleration</A> accMax[naxis]=<font color="red">fill</font>(2.5, naxis) <font color="darkgreen">
    &quot;Maximum axis acceleration&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>SI.Time</A> startTime=0 <font color="darkgreen">&quot;Start time of movement&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>SI.Time</A> swingTime=0.5 <font color="darkgreen">
    &quot;Additional time after reference motion is in rest before simulation is stopped&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Angle"
>SI.Angle</A> angleBeg[:]=<font color="red">Cv.from_deg</font>(angleBegDeg) <font color="darkgreen">&quot;Start angles&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Angle"
>SI.Angle</A> angleEnd[:]=<font color="red">Cv.from_deg</font>(angleEndDeg) <font color="darkgreen">&quot;End angles&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControlBus"
>ControlBus</A> controlBus;
  <A HREF="Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.KinematicPTP2"
>Modelica.Blocks.Sources.KinematicPTP2</A> path(
    q_end=angleEnd,
    qd_max=speedMax,
    qdd_max=accMax,
    startTime=startTime,
    q_begin=angleBeg);
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus"
>PathToAxisControlBus</A> pathToAxis1(nAxis=naxis, axisUsed=1);
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus"
>PathToAxisControlBus</A> pathToAxis2(nAxis=naxis, axisUsed=2);
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus"
>PathToAxisControlBus</A> pathToAxis3(nAxis=naxis, axisUsed=3);
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus"
>PathToAxisControlBus</A> pathToAxis4(nAxis=naxis, axisUsed=4);
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus"
>PathToAxisControlBus</A> pathToAxis5(nAxis=naxis, axisUsed=5);
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus"
>PathToAxisControlBus</A> pathToAxis6(nAxis=naxis, axisUsed=6);</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Blocks_Logical.html#Modelica.Blocks.Logical.TerminateSimulation"
>Blocks.Logical.TerminateSimulation</A> terminateSimulation(condition=time &gt;= path.endTime
         + swingTime);</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(path.q, pathToAxis1.q);
  <font color="red">connect</font>(path.qd, pathToAxis1.qd);
  <font color="red">connect</font>(path.qdd, pathToAxis1.qdd);
  <font color="red">connect</font>(path.moving, pathToAxis1.moving);
  <font color="red">connect</font>(path.q, pathToAxis2.q);
  <font color="red">connect</font>(path.qd, pathToAxis2.qd);
  <font color="red">connect</font>(path.qdd, pathToAxis2.qdd);
  <font color="red">connect</font>(path.moving, pathToAxis2.moving);
  <font color="red">connect</font>(path.q, pathToAxis3.q);
  <font color="red">connect</font>(path.qd, pathToAxis3.qd);
  <font color="red">connect</font>(path.qdd, pathToAxis3.qdd);
  <font color="red">connect</font>(path.moving, pathToAxis3.moving);
  <font color="red">connect</font>(path.q, pathToAxis4.q);
  <font color="red">connect</font>(path.qd, pathToAxis4.qd);
  <font color="red">connect</font>(path.qdd, pathToAxis4.qdd);
  <font color="red">connect</font>(path.moving, pathToAxis4.moving);
  <font color="red">connect</font>(path.q, pathToAxis5.q);
  <font color="red">connect</font>(path.qd, pathToAxis5.qd);
  <font color="red">connect</font>(path.qdd, pathToAxis5.qdd);
  <font color="red">connect</font>(path.moving, pathToAxis5.moving);
  <font color="red">connect</font>(path.q, pathToAxis6.q);
  <font color="red">connect</font>(path.qd, pathToAxis6.qd);
  <font color="red">connect</font>(path.qdd, pathToAxis6.qdd);
  <font color="red">connect</font>(path.moving, pathToAxis6.moving);
  <font color="red">connect</font>(pathToAxis1.axisControlBus, controlBus.axisControlBus1);
  <font color="red">connect</font>(pathToAxis2.axisControlBus, controlBus.axisControlBus2);
  <font color="red">connect</font>(pathToAxis3.axisControlBus, controlBus.axisControlBus3);
  <font color="red">connect</font>(pathToAxis4.axisControlBus, controlBus.axisControlBus4);
  <font color="red">connect</font>(pathToAxis5.axisControlBus, controlBus.axisControlBus5);
  <font color="red">connect</font>(pathToAxis6.axisControlBus, controlBus.axisControlBus6);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PathPlanning6;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PathToAxisControlBus<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBusI.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</A>.PathToAxisControlBus</H2>
<B>Map path planning to one axis control bus</B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBusD.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.PathToAxisControlBus">
<P><H3>Information</H3></P>
Extends from <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Blocks.Interfaces.BlockIcon</A> (Basic graphical layout of input/output block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Integer</TD><TD>nAxis</TD><TD>6</TD><TD>Number of driven axis</TD></TR>
<TR><TD>Integer</TD><TD>axisUsed</TD><TD>1</TD><TD>Map path planning of axisUsed to axisControlBus</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>q[nAxis]</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>qd[nAxis]</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>qdd[nAxis]</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus"
>AxisControlBus</A></TD><TD>axisControlBus</TD><TD>&nbsp;</TD></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>moving[nAxis]</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> PathToAxisControlBus <font color="darkgreen">
  &quot;Map path planning to one axis control bus&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Blocks.Interfaces.BlockIcon</A>;

  <font color="blue">parameter </font>Integer nAxis=6 <font color="darkgreen">&quot;Number of driven axis&quot;</font>;
  <font color="blue">parameter </font>Integer axisUsed=1 <font color="darkgreen">
    &quot;Map path planning of axisUsed to axisControlBus&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Blocks.Interfaces.RealInput</A> q[nAxis];
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Blocks.Interfaces.RealInput</A> qd[nAxis];
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Blocks.Interfaces.RealInput</A> qdd[nAxis];
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus"
>AxisControlBus</A> axisControlBus;
  <A HREF="Modelica_Blocks_Routing.html#Modelica.Blocks.Routing.RealPassThrough"
>Blocks.Routing.RealPassThrough</A> q_axisUsed;
  <A HREF="Modelica_Blocks_Routing.html#Modelica.Blocks.Routing.RealPassThrough"
>Blocks.Routing.RealPassThrough</A> qd_axisUsed;
  <A HREF="Modelica_Blocks_Routing.html#Modelica.Blocks.Routing.RealPassThrough"
>Blocks.Routing.RealPassThrough</A> qdd_axisUsed;
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Blocks.Interfaces.BooleanInput</A> moving[nAxis];
  <A HREF="Modelica_Blocks_Routing.html#Modelica.Blocks.Routing.BooleanPassThrough"
>Blocks.Routing.BooleanPassThrough</A> motion_ref_axisUsed;</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(q_axisUsed.u, q[axisUsed]);
  <font color="red">connect</font>(qd_axisUsed.u, qd[axisUsed]);
  <font color="red">connect</font>(qdd_axisUsed.u, qdd[axisUsed]);
  <font color="red">connect</font>(motion_ref_axisUsed.u, moving[axisUsed]);
  <font color="red">connect</font>(motion_ref_axisUsed.y, axisControlBus.motion_ref);
  <font color="red">connect</font>(qdd_axisUsed.y, axisControlBus.acceleration_ref);
  <font color="red">connect</font>(qd_axisUsed.y, axisControlBus.speed_ref);
  <font color="red">connect</font>(q_axisUsed.y, axisControlBus.angle_ref);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>PathToAxisControlBus;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE GearType1<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType1I.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType1" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType1"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</A>.GearType1</H2>
<B>Motor inertia and gearbox model for r3 joints 1,2,3 </B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType1D.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType1">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Models the gearbox used in the first three joints with all its effects,
like elasticity and friction.
Coulomb friction is approximated by a friction element acting
at the "motor"-side. In reality, bearing friction should be
also incorporated at the driven side of the gearbox. However,
this would require considerable more effort for the measurement
of the friction parameters.
Default values for all parameters are given for joint 1.
Model relativeStates is used to define the relative angle
and relative angular velocity across the spring (=gear elasticity)
as state variables. The reason is, that a default initial
value of zero of these states makes always sense.
If the absolute angle and the absolute angular velocity of model
Jmotor would be used as states, and the load angle (= joint angle of
robot) is NOT zero, one has always to ensure that the initial values
of the motor angle and of the joint angle are modified correspondingly.
Otherwise, the spring has an unrealistic deflection at initial time.
Since relative quantities are used as state variables, this simplifies
the definition of initial values considerably.
</p>
<pre>
</PRE><P>
Extends from <A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges"
>Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges</A> (Partial model for a component with two rotational 1-dim. shaft flanges).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>i</TD><TD>-105</TD><TD>gear ratio</TD></TR>
<TR><TD>Real</TD><TD>c</TD><TD>43</TD><TD>Spring constant [N.m/rad]</TD></TR>
<TR><TD>Real</TD><TD>d</TD><TD>0.005</TD><TD>Damper constant [N.m.s/rad]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Torque"
>Torque</A></TD><TD>Rv0</TD><TD>0.4</TD><TD>Viscous friction torque at zero velocity [N.m]</TD></TR>
<TR><TD>Real</TD><TD>Rv1</TD><TD>(0.13/160)</TD><TD>Viscous friction coefficient (R=Rv0+Rv1*abs(qd)) [N.m.s/rad]</TD></TR>
<TR><TD>Real</TD><TD>peak</TD><TD>1</TD><TD>Maximum static friction torque is peak*Rv0 (peak &gt;= 1)</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>Flange of left shaft</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>Flange of right shaft</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> GearType1 <font color="darkgreen">
  &quot;Motor inertia and gearbox model for r3 joints 1,2,3 &quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges"
>Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges</A>;
  <font color="blue">parameter </font>Real i=-105 <font color="darkgreen">&quot;gear ratio&quot;</font>;
  <font color="blue">parameter </font>Real c(unit=&quot;N.m/rad&quot;) = 43 <font color="darkgreen">&quot;Spring constant&quot;</font>;
  <font color="blue">parameter </font>Real d(unit=&quot;N.m.s/rad&quot;) = 0.005 <font color="darkgreen">&quot;Damper constant&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Torque"
>SI.Torque</A> Rv0=0.4 <font color="darkgreen">&quot;Viscous friction torque at zero velocity&quot;</font>;
  <font color="blue">parameter </font>Real Rv1(unit=&quot;N.m.s/rad&quot;) = (0.13/160) <font color="darkgreen">
    &quot;Viscous friction coefficient (R=Rv0+Rv1*abs(qd))&quot;</font>;
  <font color="blue">parameter </font>Real peak=1 <font color="darkgreen">
    &quot;Maximum static friction torque is peak*Rv0 (peak &gt;= 1)&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularAcceleration"
>SI.AngularAcceleration</A> a_rel=<font color="red">der</font>(spring.w_rel) <font color="darkgreen">
    &quot;Relative angular acceleration of spring&quot;</font>;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>SI.AngularVelocity</A> unitAngularVelocity = 1;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Torque"
>SI.Torque</A> unitTorque = 1;

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Mechanics_Rotational_Components.html#Modelica.Mechanics.Rotational.Components.IdealGear"
>Modelica.Mechanics.Rotational.Components.IdealGear</A> gear(
                                               ratio=i, useSupport=false);
  <A HREF="Modelica_Mechanics_Rotational_Components.html#Modelica.Mechanics.Rotational.Components.SpringDamper"
>Modelica.Mechanics.Rotational.Components.SpringDamper</A> spring(
                                                    c=c, d=d);
  <A HREF="Modelica_Mechanics_Rotational_Components.html#Modelica.Mechanics.Rotational.Components.BearingFriction"
>Modelica.Mechanics.Rotational.Components.BearingFriction</A> bearingFriction(
                                                                tau_pos=[0,
         Rv0/unitTorque; 1, (Rv0 + Rv1*unitAngularVelocity)/unitTorque],
      useSupport=false);</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(spring.flange_b, gear.flange_a);
  <font color="red">connect</font>(bearingFriction.flange_b, spring.flange_a);
  <font color="red">connect</font>(gear.flange_b, flange_b);
  <font color="red">connect</font>(bearingFriction.flange_a, flange_a);</textblock>
<font color="blue">initial </font><font color="blue">equation </font>
  spring.w_rel = 0;
  a_rel = 0;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>GearType1;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE GearType2<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2I.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</A>.GearType2</H2>
<B>Motor inertia and gearbox model for r3 joints 4,5,6  </B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2D.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
The elasticity and damping in the gearboxes of the outermost
three joints of the robot is neglected.
Default values for all parameters are given for joint 4.
</p>
<pre>
</PRE><P>
Extends from <A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges"
>Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges</A> (Partial model for a component with two rotational 1-dim. shaft flanges).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>i</TD><TD>-99</TD><TD>Gear ratio</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Torque"
>Torque</A></TD><TD>Rv0</TD><TD>21.8</TD><TD>Viscous friction torque at zero velocity [N.m]</TD></TR>
<TR><TD>Real</TD><TD>Rv1</TD><TD>9.8</TD><TD>Viscous friction coefficient in [Nms/rad] (R=Rv0+Rv1*abs(qd))</TD></TR>
<TR><TD>Real</TD><TD>peak</TD><TD>(26.7/21.8)</TD><TD>Maximum static friction torque is peak*Rv0 (peak &gt;= 1)</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>Flange of left shaft</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>Flange of right shaft</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> GearType2 <font color="darkgreen">
  &quot;Motor inertia and gearbox model for r3 joints 4,5,6  &quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges"
>Modelica.Mechanics.Rotational.Interfaces.PartialTwoFlanges</A>;
  <font color="blue">parameter </font>Real i=-99 <font color="darkgreen">&quot;Gear ratio&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Torque"
>SI.Torque</A> Rv0=21.8 <font color="darkgreen">&quot;Viscous friction torque at zero velocity&quot;</font>;
  <font color="blue">parameter </font>Real Rv1=9.8 <font color="darkgreen">
    &quot;Viscous friction coefficient in [Nms/rad] (R=Rv0+Rv1*abs(qd))&quot;</font>;
  <font color="blue">parameter </font>Real peak=(26.7/21.8) <font color="darkgreen">
    &quot;Maximum static friction torque is peak*Rv0 (peak &gt;= 1)&quot;</font>;

  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>SI.AngularVelocity</A> unitAngularVelocity = 1;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Torque"
>SI.Torque</A> unitTorque = 1;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Mechanics_Rotational_Components.html#Modelica.Mechanics.Rotational.Components.IdealGear"
>Modelica.Mechanics.Rotational.Components.IdealGear</A> gear(
                                               ratio=i, useSupport=false);
  <A HREF="Modelica_Mechanics_Rotational_Components.html#Modelica.Mechanics.Rotational.Components.BearingFriction"
>Modelica.Mechanics.Rotational.Components.BearingFriction</A> bearingFriction(
                                                                tau_pos=[0,
         Rv0/unitTorque; 1, (Rv0 + Rv1*unitAngularVelocity)/unitTorque], peak=peak,
    useSupport=false);</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(gear.flange_b, bearingFriction.flange_a);
  <font color="red">connect</font>(bearingFriction.flange_b, flange_b);
  <font color="red">connect</font>(gear.flange_a, flange_a);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>GearType2;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Motor<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MotorI.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Motor" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Motor"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</A>.Motor</H2>
<B>Motor model including current controller of r3 motors </B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MotorD.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Motor">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Default values are given for the motor of joint 1.
The input of the motor is the desired current
(the actual current is proportional to the torque
produced by the motor).
</p>
<pre>
</PRE><P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.MotorIcon"
>Modelica.Icons.MotorIcon</A> (Icon for electrical motor).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Inertia"
>Inertia</A></TD><TD>J</TD><TD>0.0013</TD><TD>Moment of inertia of motor [kg.m2]</TD></TR>
<TR><TD>Real</TD><TD>k</TD><TD>1.1616</TD><TD>Gain of motor</TD></TR>
<TR><TD>Real</TD><TD>w</TD><TD>4590</TD><TD>Time constant of motor</TD></TR>
<TR><TD>Real</TD><TD>D</TD><TD>0.6</TD><TD>Damping constant of motor</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>AngularVelocity</A></TD><TD>w_max</TD><TD>315</TD><TD>Maximum speed of motor [rad/s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>Current</A></TD><TD>i_max</TD><TD>9</TD><TD>Maximum current of motor [A]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_motor</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus"
>AxisControlBus</A></TD><TD>axisControlBus</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Motor <font color="darkgreen">&quot;Motor model including current controller of r3 motors &quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.MotorIcon"
>Modelica.Icons.MotorIcon</A>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Inertia"
>SI.Inertia</A> J(min=0)=0.0013 <font color="darkgreen">&quot;Moment of inertia of motor&quot;</font>;
  <font color="blue">parameter </font>Real k=1.1616 <font color="darkgreen">&quot;Gain of motor&quot;</font>;
  <font color="blue">parameter </font>Real w=4590 <font color="darkgreen">&quot;Time constant of motor&quot;</font>;
  <font color="blue">parameter </font>Real D=0.6 <font color="darkgreen">&quot;Damping constant of motor&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>SI.AngularVelocity</A> w_max=315 <font color="darkgreen">&quot;Maximum speed of motor&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Current"
>SI.Current</A> i_max=9 <font color="darkgreen">&quot;Maximum current of motor&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_b"
>Modelica.Mechanics.Rotational.Interfaces.Flange_b</A> flange_motor;
  <A HREF="Modelica_Electrical_Analog_Sources.html#Modelica.Electrical.Analog.Sources.SignalVoltage"
>Modelica.Electrical.Analog.Sources.SignalVoltage</A> Vs;
  <A HREF="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealOpAmp"
>Modelica.Electrical.Analog.Ideal.IdealOpAmp</A> diff;
  <A HREF="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealOpAmp"
>Modelica.Electrical.Analog.Ideal.IdealOpAmp</A> power;
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.EMF"
>Electrical.Analog.Basic.EMF</A> emf( k=k, useSupport=false);
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Inductor"
>Modelica.Electrical.Analog.Basic.Inductor</A> La(L=(250/(2*D*w)));
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Resistor"
>Modelica.Electrical.Analog.Basic.Resistor</A> Ra(R=250);
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Resistor"
>Modelica.Electrical.Analog.Basic.Resistor</A> Rd2(R=100);
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Capacitor"
>Modelica.Electrical.Analog.Basic.Capacitor</A> C(C=0.004*D/w);
  <A HREF="Modelica_Electrical_Analog_Ideal.html#Modelica.Electrical.Analog.Ideal.IdealOpAmp"
>Modelica.Electrical.Analog.Ideal.IdealOpAmp</A> OpI;
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Resistor"
>Modelica.Electrical.Analog.Basic.Resistor</A> Rd1(R=100);
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Resistor"
>Modelica.Electrical.Analog.Basic.Resistor</A> Ri(R=10);
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Resistor"
>Modelica.Electrical.Analog.Basic.Resistor</A> Rp1(R=200);
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Resistor"
>Modelica.Electrical.Analog.Basic.Resistor</A> Rp2(R=50);
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Resistor"
>Modelica.Electrical.Analog.Basic.Resistor</A> Rd4(R=100);
  <A HREF="Modelica_Electrical_Analog_Sources.html#Modelica.Electrical.Analog.Sources.SignalVoltage"
>Modelica.Electrical.Analog.Sources.SignalVoltage</A> hall2;
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Resistor"
>Modelica.Electrical.Analog.Basic.Resistor</A> Rd3(R=100);
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Ground"
>Modelica.Electrical.Analog.Basic.Ground</A> g1;
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Ground"
>Modelica.Electrical.Analog.Basic.Ground</A> g2;
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Ground"
>Modelica.Electrical.Analog.Basic.Ground</A> g3;
  <A HREF="Modelica_Electrical_Analog_Sensors.html#Modelica.Electrical.Analog.Sensors.CurrentSensor"
>Modelica.Electrical.Analog.Sensors.CurrentSensor</A> hall1;
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Ground"
>Modelica.Electrical.Analog.Basic.Ground</A> g4;
  <A HREF="Modelica_Electrical_Analog_Basic.html#Modelica.Electrical.Analog.Basic.Ground"
>Modelica.Electrical.Analog.Basic.Ground</A> g5;
  <A HREF="Modelica_Mechanics_Rotational_Sensors.html#Modelica.Mechanics.Rotational.Sensors.AngleSensor"
>Modelica.Mechanics.Rotational.Sensors.AngleSensor</A> phi;
  <A HREF="Modelica_Mechanics_Rotational_Sensors.html#Modelica.Mechanics.Rotational.Sensors.SpeedSensor"
>Modelica.Mechanics.Rotational.Sensors.SpeedSensor</A> speed;
  <A HREF="Modelica_Mechanics_Rotational_Components.html#Modelica.Mechanics.Rotational.Components.Inertia"
>Modelica.Mechanics.Rotational.Components.Inertia</A> Jmotor(
                                               J=J);
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus</A>
    axisControlBus;
  <A HREF="Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Blocks.Math.Gain</A> convert1(k=1);
  <A HREF="Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Blocks.Math.Gain</A> convert2(k=1);</textblock>
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="darkgreen">// initialize motor in steady state</font>
  <font color="red">der</font>(C.v) = 0;
  <font color="red">der</font>(La.i) = 0;


<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(La.n, emf.p);
  <font color="red">connect</font>(Ra.n, La.p);
  <font color="red">connect</font>(Rd2.n, diff.n1);
  <font color="red">connect</font>(C.n, OpI.p2);
  <font color="red">connect</font>(OpI.p2, power.p1);
  <font color="red">connect</font>(Vs.p, Rd2.p);
  <font color="red">connect</font>(diff.n1, Rd1.p);
  <font color="red">connect</font>(Rd1.n, diff.p2);
  <font color="red">connect</font>(diff.p2, Ri.p);
  <font color="red">connect</font>(Ri.n, OpI.n1);
  <font color="red">connect</font>(OpI.n1, C.p);
  <font color="red">connect</font>(power.n1, Rp1.p);
  <font color="red">connect</font>(power.p2, Rp1.n);
  <font color="red">connect</font>(Rp1.p, Rp2.p);
  <font color="red">connect</font>(power.p2, Ra.p);
  <font color="red">connect</font>(Rd3.p, hall2.p);
  <font color="red">connect</font>(Rd3.n, diff.p1);
  <font color="red">connect</font>(Rd3.n, Rd4.p);
  <font color="red">connect</font>(Vs.n, g1.p);
  <font color="red">connect</font>(g2.p, hall2.n);
  <font color="red">connect</font>(Rd4.n, g3.p);
  <font color="red">connect</font>(g3.p, OpI.p1);
  <font color="red">connect</font>(g5.p, Rp2.n);
  <font color="red">connect</font>(emf.n, hall1.p);
  <font color="red">connect</font>(hall1.n, g4.p);
  <font color="red">connect</font>(emf.flange, phi.flange);
  <font color="red">connect</font>(emf.flange, speed.flange);
  <font color="red">connect</font>(OpI.n2, power.n2);
  <font color="red">connect</font>(OpI.p1, OpI.n2);
  <font color="red">connect</font>(OpI.p1, diff.n2);
  <font color="red">connect</font>(Jmotor.flange_b, flange_motor);
  <font color="red">connect</font>(phi.phi, axisControlBus.motorAngle);
  <font color="red">connect</font>(speed.w, axisControlBus.motorSpeed);
  <font color="red">connect</font>(hall1.i, axisControlBus.current);
  <font color="red">connect</font>(hall1.i, convert1.u);
  <font color="red">connect</font>(convert1.y, hall2.v);
  <font color="red">connect</font>(convert2.u, axisControlBus.current_ref);
  <font color="red">connect</font>(convert2.y, Vs.v);
  <font color="red">connect</font>(emf.flange, Jmotor.flange_a);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Motor;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Controller<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControllerI.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Controller" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Controller"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</A>.Controller</H2>
<B>P-PI cascade controller for one axis</B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.ControllerD.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Controller">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
This controller has an inner PI-controller to control the motor speed,
and an outer P-controller to control the motor position of one axis.
The reference signals are with respect to the gear-output, and the
gear ratio is used in the controller to determine the motor
reference signals. All signals are communicated via the
"axisControlBus".
</p>
<pre></PRE><P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>kp</TD><TD>10</TD><TD>Gain of position controller</TD></TR>
<TR><TD>Real</TD><TD>ks</TD><TD>1</TD><TD>Gain of speed controller</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>Ts</TD><TD>0.01</TD><TD>Time constant of integrator of speed controller [s]</TD></TR>
<TR><TD>Real</TD><TD>ratio</TD><TD>1</TD><TD>Gear ratio of gearbox</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus"
>AxisControlBus</A></TD><TD>axisControlBus</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Controller <font color="darkgreen">&quot;P-PI cascade controller for one axis&quot;</font>
  <font color="blue">parameter </font>Real kp=10 <font color="darkgreen">&quot;Gain of position controller&quot;</font>;
  <font color="blue">parameter </font>Real ks=1 <font color="darkgreen">&quot;Gain of speed controller&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>SI.Time</A> Ts=0.01 <font color="darkgreen">&quot;Time constant of integrator of speed controller&quot;</font>;
  <font color="blue">parameter </font>Real ratio=1 <font color="darkgreen">&quot;Gear ratio of gearbox&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</A> gain1(k=ratio);
  <A HREF="Modelica_Blocks_Continuous.html#Modelica.Blocks.Continuous.PI"
>Modelica.Blocks.Continuous.PI</A> PI(k=ks, T=Ts);
  <A HREF="Modelica_Blocks_Math.html#Modelica.Blocks.Math.Feedback"
>Modelica.Blocks.Math.Feedback</A> feedback1;
  <A HREF="Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</A> P(k=kp);
  <A HREF="Modelica_Blocks_Math.html#Modelica.Blocks.Math.Add3"
>Modelica.Blocks.Math.Add3</A> add3(k3=-1);
  <A HREF="Modelica_Blocks_Math.html#Modelica.Blocks.Math.Gain"
>Modelica.Blocks.Math.Gain</A> gain2(k=ratio);
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus</A>
    axisControlBus;</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(gain1.y, feedback1.u1);
  <font color="red">connect</font>(feedback1.y, P.u);
  <font color="red">connect</font>(P.y, add3.u2);
  <font color="red">connect</font>(gain2.y, add3.u1);
  <font color="red">connect</font>(add3.y, PI.u);
  <font color="red">connect</font>(gain2.u, axisControlBus.speed_ref);
  <font color="red">connect</font>(gain1.u, axisControlBus.angle_ref);
  <font color="red">connect</font>(feedback1.u2, axisControlBus.motorAngle);
  <font color="red">connect</font>(add3.u3, axisControlBus.motorSpeed);
  <font color="red">connect</font>(PI.y, axisControlBus.current_ref);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Controller;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE AxisType1<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1I.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</A>.AxisType1</H2>
<B>Axis model of the r3 joints 1,2,3 </B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1D.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1">
<P><H3>Information</H3></P>
Extends from <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType2"
>AxisType2</A> (Axis model of the r3 joints 4,5,6 ).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Controller</TD></TR>
<TR><TD>Real</TD><TD>kp</TD><TD>10</TD><TD>Gain of position controller</TD></TR>
<TR><TD>Real</TD><TD>ks</TD><TD>1</TD><TD>Gain of speed controller</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>Ts</TD><TD>0.01</TD><TD>Time constant of integrator of speed controller [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Motor</TD></TR>
<TR><TD>Real</TD><TD>k</TD><TD>1.1616</TD><TD>Gain of motor</TD></TR>
<TR><TD>Real</TD><TD>w</TD><TD>4590</TD><TD>Time constant of motor</TD></TR>
<TR><TD>Real</TD><TD>D</TD><TD>0.6</TD><TD>Damping constant of motor</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Inertia"
>Inertia</A></TD><TD>J</TD><TD>0.0013</TD><TD>Moment of inertia of motor [kg.m2]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Gear</TD></TR>
<TR><TD>Real</TD><TD>ratio</TD><TD>-105</TD><TD>Gear ratio</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Torque"
>Torque</A></TD><TD>Rv0</TD><TD>0.4</TD><TD>Viscous friction torque at zero velocity in [Nm] [N.m]</TD></TR>
<TR><TD>Real</TD><TD>Rv1</TD><TD>(0.13/160)</TD><TD>Viscous friction coefficient in [Nms/rad] [N.m.s/rad]</TD></TR>
<TR><TD>Real</TD><TD>peak</TD><TD>1</TD><TD>Maximum static friction torque is peak*Rv0 (peak &gt;= 1)</TD></TR>
<TR><TD>Real</TD><TD>c</TD><TD>43</TD><TD>Spring constant [N.m/rad]</TD></TR>
<TR><TD>Real</TD><TD>cd</TD><TD>0.005</TD><TD>Damper constant [N.m.s/rad]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus"
>AxisControlBus</A></TD><TD>axisControlBus</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> AxisType1 <font color="darkgreen">&quot;Axis model of the r3 joints 1,2,3 &quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType2"
>AxisType2</A>(<font color="blue">redeclare </font><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType1"
>GearType1</A> gear(c=c, d=cd));
  <font color="blue">parameter </font>Real c(unit=&quot;N.m/rad&quot;) = 43 <font color="darkgreen">&quot;Spring constant&quot;</font>;
  <font color="blue">parameter </font>Real cd(unit=&quot;N.m.s/rad&quot;) = 0.005 <font color="darkgreen">&quot;Damper constant&quot;</font>;
<font color="blue">end </font>AxisType1;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE AxisType2<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType1I.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType2" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType2"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</A>.AxisType2</H2>
<B>Axis model of the r3 joints 4,5,6 </B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType2D.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisType2">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
The axis model consists of the <b>controller</b>, the <b>motor</b> including current
controller and the <b>gearbox</b> including gear elasticity and bearing friction.
The only difference to the axis model of joints 4,5,6 (= model axisType2) is
that elasticity and damping in the gear boxes are not neglected.
</p>
<p>
The input signals of this component are the desired angle and desired angular
velocity of the joint. The reference signals have to be "smooth" (position
has to be differentiable at least 2 times). Otherwise, the gear elasticity
leads to significant oscillations.
</p>
<p>
Default values of the parameters are given for the axis of joint 1.
</p>
<pre>
</PRE><P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2"
>GearType2</A></TD><TD>gear</TD><TD>redeclare GearType2 gear(Rv0...</TD><TD>&nbsp;</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Controller</TD></TR>
<TR><TD>Real</TD><TD>kp</TD><TD>10</TD><TD>Gain of position controller</TD></TR>
<TR><TD>Real</TD><TD>ks</TD><TD>1</TD><TD>Gain of speed controller</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>Ts</TD><TD>0.01</TD><TD>Time constant of integrator of speed controller [s]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Motor</TD></TR>
<TR><TD>Real</TD><TD>k</TD><TD>1.1616</TD><TD>Gain of motor</TD></TR>
<TR><TD>Real</TD><TD>w</TD><TD>4590</TD><TD>Time constant of motor</TD></TR>
<TR><TD>Real</TD><TD>D</TD><TD>0.6</TD><TD>Damping constant of motor</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Inertia"
>Inertia</A></TD><TD>J</TD><TD>0.0013</TD><TD>Moment of inertia of motor [kg.m2]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Gear</TD></TR>
<TR><TD>Real</TD><TD>ratio</TD><TD>-105</TD><TD>Gear ratio</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Torque"
>Torque</A></TD><TD>Rv0</TD><TD>0.4</TD><TD>Viscous friction torque at zero velocity in [Nm] [N.m]</TD></TR>
<TR><TD>Real</TD><TD>Rv1</TD><TD>(0.13/160)</TD><TD>Viscous friction coefficient in [Nms/rad] [N.m.s/rad]</TD></TR>
<TR><TD>Real</TD><TD>peak</TD><TD>1</TD><TD>Maximum static friction torque is peak*Rv0 (peak &gt;= 1)</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus"
>AxisControlBus</A></TD><TD>axisControlBus</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> AxisType2 <font color="darkgreen">&quot;Axis model of the r3 joints 4,5,6 &quot;</font>
  <font color="blue">parameter </font>Real kp=10 <font color="darkgreen">&quot;Gain of position controller&quot;</font>;
  <font color="blue">parameter </font>Real ks=1 <font color="darkgreen">&quot;Gain of speed controller&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>SI.Time</A> Ts=0.01 <font color="darkgreen">&quot;Time constant of integrator of speed controller&quot;</font>;
  <font color="blue">parameter </font>Real k=1.1616 <font color="darkgreen">&quot;Gain of motor&quot;</font>;
  <font color="blue">parameter </font>Real w=4590 <font color="darkgreen">&quot;Time constant of motor&quot;</font>;
  <font color="blue">parameter </font>Real D=0.6 <font color="darkgreen">&quot;Damping constant of motor&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Inertia"
>SI.Inertia</A> J(min=0) = 0.0013 <font color="darkgreen">&quot;Moment of inertia of motor&quot;</font>;
  <font color="blue">parameter </font>Real ratio=-105 <font color="darkgreen">&quot;Gear ratio&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Torque"
>SI.Torque</A> Rv0=0.4 <font color="darkgreen">
    &quot;Viscous friction torque at zero velocity in [Nm]&quot;</font>;
  <font color="blue">parameter </font>Real Rv1(unit=&quot;N.m.s/rad&quot;) = (0.13/160) <font color="darkgreen">
    &quot;Viscous friction coefficient in [Nms/rad]&quot;</font>;
  <font color="blue">parameter </font>Real peak=1 <font color="darkgreen">
    &quot;Maximum static friction torque is peak*Rv0 (peak &gt;= 1)&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_b"
>Modelica.Mechanics.Rotational.Interfaces.Flange_b</A> flange;
  <font color="blue">replaceable </font><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.GearType2"
>GearType2</A> gear(
    Rv0=Rv0,
    Rv1=Rv1,
    peak=peak,
    i=ratio);
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Motor"
>Motor</A> motor(
    J=J,
    k=k,
    w=w,
    D=D);
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.Controller"
>RobotR3.Components.Controller</A> controller(
    kp=kp,
    ks=ks,
    Ts=Ts,
    ratio=ratio);
  <A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.AxisControlBus</A>
    axisControlBus;
  <A HREF="Modelica_Mechanics_Rotational_Sensors.html#Modelica.Mechanics.Rotational.Sensors.AngleSensor"
>Modelica.Mechanics.Rotational.Sensors.AngleSensor</A> angleSensor;
  <A HREF="Modelica_Mechanics_Rotational_Sensors.html#Modelica.Mechanics.Rotational.Sensors.SpeedSensor"
>Modelica.Mechanics.Rotational.Sensors.SpeedSensor</A> speedSensor;
  <A HREF="Modelica_Mechanics_Rotational_Sensors.html#Modelica.Mechanics.Rotational.Sensors.AccSensor"
>Modelica.Mechanics.Rotational.Sensors.AccSensor</A> accSensor;
  <A HREF="Modelica_Mechanics_Rotational_Components.html#Modelica.Mechanics.Rotational.Components.InitializeFlange"
>Modelica.Mechanics.Rotational.Components.InitializeFlange</A> initializeFlange(
                                               stateSelect=StateSelect.prefer);
  <A HREF="Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Blocks.Sources.Constant</A> const(k=0);</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(gear.flange_b, flange);
  <font color="red">connect</font>(gear.flange_b, angleSensor.flange);
  <font color="red">connect</font>(gear.flange_b, speedSensor.flange);
  <font color="red">connect</font>(motor.flange_motor, gear.flange_a);
  <font color="red">connect</font>(gear.flange_b, accSensor.flange);
  <font color="red">connect</font>(controller.axisControlBus, axisControlBus);
  <font color="red">connect</font>(motor.axisControlBus, axisControlBus);
  <font color="red">connect</font>(angleSensor.phi, axisControlBus.angle);
  <font color="red">connect</font>(speedSensor.w, axisControlBus.speed);
  <font color="red">connect</font>(accSensor.a, axisControlBus.acceleration);
  <font color="red">connect</font>(axisControlBus.angle_ref, initializeFlange.phi_start);
  <font color="red">connect</font>(axisControlBus.speed_ref, initializeFlange.w_start);
  <font color="red">connect</font>(initializeFlange.flange, flange);
  <font color="red">connect</font>(const.y, initializeFlange.a_start);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>AxisType2;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE MechanicalStructure<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MechanicalStructureI.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MechanicalStructure" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MechanicalStructure"></A><A HREF="Modelica_Mechanics_MultiBody_Examples_Systems_RobotR3_Components.html#Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components"
>Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components</A>.MechanicalStructure</H2>
<B>Model of the mechanical part of the r3 robot (without animation)</B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MechanicalStructureD.png" ALT="Modelica.Mechanics.MultiBody.Examples.Systems.RobotR3.Components.MechanicalStructure">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
This model contains the mechanical components of the r3 robot
(multibody system).
</p>
<pre>
</PRE><P>

<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>animation</TD><TD>true</TD><TD>= true, if animation shall be enabled</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Mass"
>Mass</A></TD><TD>mLoad</TD><TD>15</TD><TD>Mass of load [kg]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>rLoad[3]</TD><TD>{0,0.25,0}</TD><TD>Distance from last flange to load mass&gt; [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>Acceleration</A></TD><TD>g</TD><TD>9.81</TD><TD>Gravity acceleration [m/s2]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>axis1</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>axis2</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>axis3</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>axis4</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>axis5</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>axis6</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> MechanicalStructure <font color="darkgreen">
  &quot;Model of the mechanical part of the r3 robot (without animation)&quot;</font>

  <font color="blue">parameter </font>Boolean animation=true <font color="darkgreen">&quot;= true, if animation shall be enabled&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Mass"
>SI.Mass</A> mLoad(min=0)=15 <font color="darkgreen">&quot;Mass of load&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> rLoad[3]={0,0.25,0} <font color="darkgreen">
    &quot;Distance from last flange to load mass&gt;&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> g=9.81 <font color="darkgreen">&quot;Gravity acceleration&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Angle"
>SI.Angle</A> q[6] <font color="darkgreen">&quot;Joint angles&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularVelocity"
>SI.AngularVelocity</A> qd[6] <font color="darkgreen">&quot;Joint speeds&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.AngularAcceleration"
>SI.AngularAcceleration</A> qdd[6] <font color="darkgreen">&quot;Joint accelerations&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Torque"
>SI.Torque</A> tau[6] <font color="darkgreen">&quot;Joint driving torques&quot;</font>;
  <font color="darkgreen">//r0={0,0.351,0},</font>

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Modelica.Mechanics.Rotational.Interfaces.Flange_a</A> axis1;
  <A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Modelica.Mechanics.Rotational.Interfaces.Flange_a</A> axis2;
  <A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Modelica.Mechanics.Rotational.Interfaces.Flange_a</A> axis3;
  <A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Modelica.Mechanics.Rotational.Interfaces.Flange_a</A> axis4;
  <A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Modelica.Mechanics.Rotational.Interfaces.Flange_a</A> axis5;
  <A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Modelica.Mechanics.Rotational.Interfaces.Flange_a</A> axis6;
  <font color="blue">inner </font><A HREF="Modelica_Mechanics_MultiBody.html#Modelica.Mechanics.MultiBody.World"
>Modelica.Mechanics.MultiBody.World</A> world(
    g=(g)*<font color="red">Modelica.Math.Vectors.length</font>(
                                  ({0,-1,0})),
    n={0,-1,0},
    animateWorld=false,
    animateGravity=false,
    enableAnimation=animation);
  <A HREF="Modelica_Mechanics_MultiBody_Joints.html#Modelica.Mechanics.MultiBody.Joints.Revolute"
>Modelica.Mechanics.MultiBody.Joints.Revolute</A> r1(n={0,1,0},useAxisFlange=true,
      animation=animation);
  <A HREF="Modelica_Mechanics_MultiBody_Joints.html#Modelica.Mechanics.MultiBody.Joints.Revolute"
>Modelica.Mechanics.MultiBody.Joints.Revolute</A> r2(n={1,0,0},useAxisFlange=true,
      animation=animation);
  <A HREF="Modelica_Mechanics_MultiBody_Joints.html#Modelica.Mechanics.MultiBody.Joints.Revolute"
>Modelica.Mechanics.MultiBody.Joints.Revolute</A> r3(n={1,0,0},useAxisFlange=true,
      animation=animation);
  <A HREF="Modelica_Mechanics_MultiBody_Joints.html#Modelica.Mechanics.MultiBody.Joints.Revolute"
>Modelica.Mechanics.MultiBody.Joints.Revolute</A> r4(n={0,1,0},useAxisFlange=true,
      animation=animation);
  <A HREF="Modelica_Mechanics_MultiBody_Joints.html#Modelica.Mechanics.MultiBody.Joints.Revolute"
>Modelica.Mechanics.MultiBody.Joints.Revolute</A> r5(n={1,0,0},useAxisFlange=true,
      animation=animation);
  <A HREF="Modelica_Mechanics_MultiBody_Joints.html#Modelica.Mechanics.MultiBody.Joints.Revolute"
>Modelica.Mechanics.MultiBody.Joints.Revolute</A> r6(n={0,1,0},useAxisFlange=true,
      animation=animation);
  <A HREF="Modelica_Mechanics_MultiBody_Parts.html#Modelica.Mechanics.MultiBody.Parts.BodyShape"
>Modelica.Mechanics.MultiBody.Parts.BodyShape</A> b0(
    r={0,0.351,0},
    shapeType=&quot;0&quot;,
    r_shape={0,0,0},
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    length=0.225,
    width=0.3,
    height=0.3,
    color={0,0,255},
    animation=animation,
    animateSphere=false,
    r_CM={0,0,0},
    m=1);
  <A HREF="Modelica_Mechanics_MultiBody_Parts.html#Modelica.Mechanics.MultiBody.Parts.BodyShape"
>Modelica.Mechanics.MultiBody.Parts.BodyShape</A> b1(
    r={0,0.324,0.3},
    I_22=1.16,
    shapeType=&quot;1&quot;,
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    length=0.25,
    width=0.15,
    height=0.2,
    animation=animation,
    animateSphere=false,
    color={255,0,0},
    r_CM={0,0,0},
    m=1);
  <A HREF="Modelica_Mechanics_MultiBody_Parts.html#Modelica.Mechanics.MultiBody.Parts.BodyShape"
>Modelica.Mechanics.MultiBody.Parts.BodyShape</A> b2(
    r={0,0.65,0},
    r_CM={0.172,0.205,0},
    m=56.5,
    I_11=2.58,
    I_22=0.64,
    I_33=2.73,
    I_21=-0.46,
    shapeType=&quot;2&quot;,
    r_shape={0,0,0},
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    length=0.5,
    width=0.2,
    height=0.15,
    animation=animation,
    animateSphere=false,
    color={255,178,0});
  <A HREF="Modelica_Mechanics_MultiBody_Parts.html#Modelica.Mechanics.MultiBody.Parts.BodyShape"
>Modelica.Mechanics.MultiBody.Parts.BodyShape</A> b3(
    r={0,0.414,-0.155},
    r_CM={0.064,-0.034,0},
    m=26.4,
    I_11=0.279,
    I_22=0.245,
    I_33=0.413,
    I_21=-0.070,
    shapeType=&quot;3&quot;,
    r_shape={0,0,0},
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    length=0.15,
    width=0.15,
    height=0.15,
    animation=animation,
    animateSphere=false,
    color={255,0,0});
  <A HREF="Modelica_Mechanics_MultiBody_Parts.html#Modelica.Mechanics.MultiBody.Parts.BodyShape"
>Modelica.Mechanics.MultiBody.Parts.BodyShape</A> b4(
    r={0,0.186,0},
    r_CM={0,0,0},
    m=28.7,
    I_11=1.67,
    I_22=0.081,
    I_33=1.67,
    shapeType=&quot;4&quot;,
    r_shape={0,0,0},
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    length=0.73,
    width=0.1,
    height=0.1,
    animation=animation,
    animateSphere=false,
    color={255,178,0});
  <A HREF="Modelica_Mechanics_MultiBody_Parts.html#Modelica.Mechanics.MultiBody.Parts.BodyShape"
>Modelica.Mechanics.MultiBody.Parts.BodyShape</A> b5(
    r={0,0.125,0},
    r_CM={0,0,0},
    m=5.2,
    I_11=1.25,
    I_22=0.81,
    I_33=1.53,
    shapeType=&quot;5&quot;,
    r_shape={0,0,0},
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    length=0.225,
    width=0.075,
    height=0.1,
    animation=animation,
    animateSphere=false,
    color={0,0,255});
  <A HREF="Modelica_Mechanics_MultiBody_Parts.html#Modelica.Mechanics.MultiBody.Parts.BodyShape"
>Modelica.Mechanics.MultiBody.Parts.BodyShape</A> b6(
    r={0,0,0},
    r_CM={0.05,0.05,0.05},
    m=0.5,
    shapeType=&quot;6&quot;,
    r_shape={0,0,0},
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    animation=animation,
    animateSphere=false,
    color={0,0,255});
  <A HREF="Modelica_Mechanics_MultiBody_Parts.html#Modelica.Mechanics.MultiBody.Parts.BodyShape"
>Modelica.Mechanics.MultiBody.Parts.BodyShape</A> load(
    r_CM=rLoad,
    m=mLoad,
    r_shape={0,0,0},
    widthDirection={1,0,0},
    width=0.05,
    height=0.05,
    color={255,0,0},
    lengthDirection=rLoad,
    length=<font color="red">Modelica.Math.Vectors.length</font>(              rLoad),
    animation=animation);</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(r6.frame_b, b6.frame_a);</textblock>
  q = {r1.phi,r2.phi,r3.phi,r4.phi,r5.phi,r6.phi};
  qd =<font color="red"> der</font>(q);
  qdd =<font color="red"> der</font>(qd);
  tau = {r1.axis.tau,r2.axis.tau,r3.axis.tau,r4.axis.tau,r5.axis.tau,r6.
    axis.tau};
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(load.frame_a, b6.frame_b);
  <font color="red">connect</font>(world.frame_b, b0.frame_a);
  <font color="red">connect</font>(b0.frame_b, r1.frame_a);
  <font color="red">connect</font>(b1.frame_b, r2.frame_a);
  <font color="red">connect</font>(r1.frame_b, b1.frame_a);
  <font color="red">connect</font>(r2.frame_b, b2.frame_a);
  <font color="red">connect</font>(b2.frame_b, r3.frame_a);
  <font color="red">connect</font>(r2.axis, axis2);
  <font color="red">connect</font>(r1.axis, axis1);
  <font color="red">connect</font>(r3.frame_b, b3.frame_a);
  <font color="red">connect</font>(b3.frame_b, r4.frame_a);
  <font color="red">connect</font>(r3.axis, axis3);
  <font color="red">connect</font>(r4.axis, axis4);
  <font color="red">connect</font>(r4.frame_b, b4.frame_a);
  <font color="red">connect</font>(b4.frame_b, r5.frame_a);
  <font color="red">connect</font>(r5.axis, axis5);
  <font color="red">connect</font>(r5.frame_b, b5.frame_a);
  <font color="red">connect</font>(b5.frame_b, r6.frame_a);
  <font color="red">connect</font>(r6.axis, axis6);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>MechanicalStructure;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.Dymola.com/">Dymola</a> Sun Jan 17 21:11:26 2010.
</address></BODY>
</HTML>
