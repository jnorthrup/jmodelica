------------------------------------------------------------
Task: Expression type analysis framework

Priority: 

Status:

Description:
Develop the type analysis framework to function both in the
instance hieararcy and in the flat representation. Also,
type computation and type checking should be separate.

Type analysis that for expressions with parametric variability 
expressions to be a part of a type definition. 

------------------------------------------------------------
Task: Develop new tests for expression type analysis framework

Priority: 

Status:

Description:
Type checking requires new test cases, and more importantly
new test mechanisms. Ideally, we would like to assert that 
a given expression in a model has a certain type.

Introduce new ExpTypeTestCase in test class hiearchy?

------------------------------------------------------------
Task: Upgrade the front-end to Modelica 3.0

Priority: 

Status:

Description:
Modelica 3.0 contains some new/changed syntactic constructs
that needs to be implemented, primarily in the parser. May
require changes in the AST definition.

------------------------------------------------------------
Task: Type checking of composite classes

Priority: 

Status:

Description:
Several type tests need to be implemented in the front-end,
including subtype checking and balanced classes constraints.

------------------------------------------------------------
Task: Better support for annotations

Priority: 

Status:

Description:
Annotations are currently not managed in a good way. One option
is to apply rewrites to annotations in order to specialize them
into dedicated AST-nodes. The test-framework may serve as a 
good example.

------------------------------------------------------------
Task: Improve test framework

Priority: 

Status:

Description:
The test framework needs to be improved:

- Introduce test annotations that follow the rules for
  vendor specific annotations.

- Optimize the execution of test-cases: currently parsers etc
  are created for each test case?
*** DONE 20080326

- Propagate more test information to the generated html-test reports.
  The way to do this is to create a custom formatter and
  give it to the ant task. Then the style-sheet in ant has to be
  updated. Notice that this is all done based on Ant functionality
  and not Junit.


------------------------------------------------------------
Task: Fix a bug in the parser

Priority: 

Status: Partially done. The expression bug is fixed in the front-end, but it remains to 
        remove the precedence commants to beaver and to rewrite the
        flat parser.

Description:
The precedence of the of ^ operator is not correct
  -(x+2)^2 -> (-(x+2))^2

Possibly, the grammar should be rewritten so that it does
not relay on the beaver directives %RIGHT %LEFT for
determining precedence. Removing this would also 
make build.xml cleaner since it would eliminate the need
to do a 'cat' operation in order to insert the precedence
directives.

------------------------------------------------------------
Task: Improve the debug-printout framework

Priority: 

Status:

Description:
Previously, AspectJ has been considered for debug-printouts,
but it was found that it is difficult to achieve fine-grained
control of where error printouts are generated. Also, the 
compilation time for weaving AspectJ aspects into the jar-file
was not neglectable. The upside is of course cleaner code. Should
AspectJ be evaluated more thoroughly? 

If not AspectJ, the debugPrint framework should be upgraded, 
at least to support a number of flags, which can be turned on
and off in order to control different classes of error printouts:
name analysis, type checking etc.

------------------------------------------------------------
Task: Fix bug related to merging of modifications

Status: done

Fix the bug that modifiers of all replacing declarations in a 
redeclaration chain is merged. Should be only those redeclarations that have
an explicit constraining clause. This is done in the attribute myEnvironment(String name)

------------------------------------------------------------
Task: Introduce class Environment.

Status: done.

The class Environment should be essentially an ArrayList<InstModification>
but also contain mechanisms for merging of modifications and expanding
of ClassModifications and CompositeModifications.

------------------------------------------------------------
Task: Name analysis 

The name analysis framework should be updated to take into account also
constraining clauses. This also requires that an environment is propagated
in the name lookup, since constraining clauses may also be redeclared.

------------------------------------------------------------
Task: Implement peel in Environment

Currently, the peeling of modifications: x.y -> y takes place outside of the
Environment class. This should be fixed.

------------------------------------------------------------
Task: Fix bug in parser related to constraining clause

Currently, a redeclaration must contain the the keyword redeclare in order
for a constraining clause to be accepted. However,
'redeclare A extends B' is also valid and in this case, the replaceable keyword
is inferred. The inference should probably be done in the parser.





