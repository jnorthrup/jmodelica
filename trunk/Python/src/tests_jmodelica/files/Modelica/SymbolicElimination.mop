model IllustExample
    Real x1(start=1, fixed=true);
    Real x2(start=1, fixed=true);
    Real y1(start=1);
    Real y2(start=1);
    Real y3(start=1);
    Real y4(start=1);
    Real y5(start=1);
    input Real u;
equation
    der(x1) = x2;
    der(x2) + y1 + y2 - y3 = u;
    x1*y3 + y2 - sqrt(x1) - 2 = 0;
    2*y1*y2*y4 - sqrt(x1) = 0;
    y1*y4 + sqrt(y3) - x1 - y4 = u;
    y4 - sqrt(y5) = 0;
    y5^2 - x1 = 0;
end IllustExample;

optimization IllustExampleLagrange(finalTime=4, objectiveIntegrand=(x1-0.647)^2+x2^2+(u-0.0595)^2)
    extends IllustExample;
end IllustExampleLagrange;

optimization IllustExampleLagrangeBound(finalTime=4, objectiveIntegrand=(x1-0.647)^2+x2^2+(u-0.0595)^2+(y1-0.289)^2)
    extends IllustExample(y1(max=0.41));
end IllustExampleLagrangeBound;

optimization IllustExampleLagrangeConstraintAndObjective(
        finalTime=4, objectiveIntegrand=(x1-0.647)^2+x2^2+(u-0.0595)^2+(y1-0.289)^2)
extends IllustExample;
constraint
    y1 <= 0.41;
end IllustExampleLagrangeConstraintAndObjective;
